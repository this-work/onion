import{U as O,a2 as Z,a3 as j,a4 as A,a5 as X,a6 as I,a7 as Y,V as P,Z as K,j as p,e as B,A as ee,f as te,h as se,c as b,o as w,v as F,F as E,r as V,m as L,p as x,k as M,w as N,n as $,s as re,b as ie,l as ne,a as C,q as oe}from"#entry";import ae from"./DXqfAmIR.js";import{u as q}from"./D2BD6qtZ.js";import{u as ce}from"./BIjOWhqp.js";import{u as le}from"./seTeM-B7.js";import{u as ue}from"./BCKEK9L1.js";function de(t){performance?.mark?.("mark_feature_usage",{detail:{feature:t}})}function fe(t=""){return t.split(/[?#]/).shift().split("/").pop().split(".").pop()}function R(t){return e=>e?t[e]||e:t.missingValue}function ge({formatter:t,keyMap:e,joinWith:s="/",valueMap:r}={}){t||(t=(o,a)=>`${o}=${a}`),e&&typeof e!="function"&&(e=R(e));const i=r||{};return Object.keys(i).forEach(o=>{typeof i[o]!="function"&&(i[o]=R(i[o]))}),(o={})=>Object.entries(o).filter(([c,u])=>typeof u<"u").map(([c,u])=>{const d=i[c];return typeof d=="function"&&(u=d(o[c])),c=typeof e=="function"?e(c):c,t(c,u)}).join(s)}function S(t=""){if(typeof t=="number")return t;if(typeof t=="string"&&t.replace("px","").match(/^\d+$/g))return Number.parseInt(t,10)}function me(t=""){if(t===void 0||!t.length)return[];const e=new Set;for(const s of t.split(" ")){const r=Number.parseInt(s.replace("x",""));r&&e.add(r)}return Array.from(e)}function pe(t){if(t.length===0)throw new Error("`densities` must not be empty, configure to `1` to render regular size only (DPR 1.0)")}function he(t){const e={};if(typeof t=="string")for(const s of t.split(/[\s,]+/).filter(r=>r)){const r=s.split(":");r.length!==2?e["1px"]=r[0].trim():e[r[0].trim()]=r[1].trim()}else Object.assign(e,t);return e}async function ye(t,e){return await ve(e).catch(r=>(console.error("Failed to get image meta for "+e,r+""),{width:0,height:0,ratio:0}))}async function ve(t){if(typeof Image>"u")throw new TypeError("Image not supported");return new Promise((e,s)=>{const r=new Image;r.onload=()=>{const i={width:r.width,height:r.height,ratio:r.width/r.height};e(i)},r.onerror=i=>s(i),r.src=t})}function we(t){const e={options:t},s=(i,o={})=>H(e,i,o),r=(i,o={},a={})=>s(i,{...a,modifiers:O(o,a.modifiers||{})}).url;for(const i in t.presets)r[i]=(o,a,c)=>r(o,a,{...t.presets[i],...c});return r.options=t,r.getImage=s,r.getMeta=(i,o)=>_e(e,i,o),r.getSizes=(i,o)=>ze(e,i,o),e.$img=r,r}async function _e(t,e,s){const r=H(t,e,{...s});return typeof r.getMeta=="function"?await r.getMeta():await ye(t,r.url)}function H(t,e,s){if(e&&typeof e!="string")throw new TypeError(`input must be a string (received ${typeof e}: ${JSON.stringify(e)})`);if(!e||e.startsWith("data:"))return{url:e};const{provider:r,defaults:i}=be(t,s.provider||t.options.provider),o=Se(t,s.preset);if(e=j(e)?e:Z(e),!r.supportsAlias){for(const d in t.options.alias)if(e.startsWith(d)){const v=t.options.alias[d];v&&(e=A(v,e.slice(d.length)))}}if(r.validateDomains&&j(e)){const d=X(e).host;if(!t.options.domains.find(v=>v===d))return{url:e}}const a=O(s,o,i);a.modifiers={...a.modifiers};const c=a.modifiers.format;a.modifiers?.width&&(a.modifiers.width=S(a.modifiers.width)),a.modifiers?.height&&(a.modifiers.height=S(a.modifiers.height));const u=r.getImage(e,a,t);return u.format=u.format||c||"",u}function be(t,e){const s=t.options.providers[e];if(!s)throw new Error("Unknown provider: "+e);return s}function Se(t,e){if(!e)return{};if(!t.options.presets[e])throw new Error("Unknown preset: "+e);return t.options.presets[e]}function ze(t,e,s){const r=S(s.modifiers?.width),i=S(s.modifiers?.height),o=he(s.sizes),a=s.densities?.trim()?me(s.densities.trim()):t.options.densities;pe(a);const c=r&&i?i/r:0,u=[],d=[];if(Object.keys(o).length>=1){for(const l in o){const g=W(l,String(o[l]),i,c,t);if(g!==void 0){u.push({size:g.size,screenMaxWidth:g.screenMaxWidth,media:`(max-width: ${g.screenMaxWidth}px)`});for(const h of a)d.push({width:g._cWidth*h,src:k(t,e,s,g,h)})}}$e(u)}else for(const l of a){const g=Object.keys(o)[0];let h=g?W(g,String(o[g]),i,c,t):void 0;h===void 0&&(h={size:"",screenMaxWidth:0,_cWidth:s.modifiers?.width,_cHeight:s.modifiers?.height}),d.push({width:l,src:k(t,e,s,h,l)})}qe(d);const v=d[d.length-1],n=u.length?u.map(l=>`${l.media?l.media+" ":""}${l.size}`).join(", "):void 0,f=n?"w":"x",y=d.map(l=>`${l.src} ${l.width}${f}`).join(", ");return{sizes:n,srcset:y,src:v?.src}}function W(t,e,s,r,i){const o=i.options.screens&&i.options.screens[t]||Number.parseInt(t),a=e.endsWith("vw");if(!a&&/^\d+$/.test(e)&&(e=e+"px"),!a&&!e.endsWith("px"))return;let c=Number.parseInt(e);if(!o||!c)return;a&&(c=Math.round(c/100*o));const u=r?Math.round(c*r):s;return{size:e,screenMaxWidth:o,_cWidth:c,_cHeight:u}}function k(t,e,s,r,i){return t.$img(e,{...s.modifiers,width:r._cWidth?r._cWidth*i:void 0,height:r._cHeight?r._cHeight*i:void 0},s)}function $e(t){t.sort((s,r)=>s.screenMaxWidth-r.screenMaxWidth);let e=null;for(let s=t.length-1;s>=0;s--){const r=t[s];r.media===e&&t.splice(s,1),e=r.media}for(let s=0;s<t.length;s++)t[s].media=t[s+1]?.media||""}function qe(t){t.sort((s,r)=>s.width-r.width);let e=null;for(let s=t.length-1;s>=0;s--){const r=t[s];r.width===e&&t.splice(s,1),e=r.width}}const T=ge({keyMap:{format:"f",fit:"fit",width:"w",height:"h",resize:"s",quality:"q",background:"b"},joinWith:"&",formatter:(t,e)=>I(t)+"_"+I(e)}),xe=(t,{modifiers:e={},baseURL:s}={},r)=>{e.width&&e.height&&(e.resize=`${e.width}x${e.height}`,delete e.width,delete e.height);const i=T(e)||"_";return s||(s=A(r.options.nuxt.baseURL,"/_ipx")),{url:A(s,i,Y(t))}},Ae=!0,je=!0,Ie=Object.freeze(Object.defineProperty({__proto__:null,getImage:xe,operationsGenerator:T,supportsAlias:je,validateDomains:Ae},Symbol.toStringTag,{value:"Module"})),Me={screens:{xs:320,sm:640,md:768,lg:1024,xl:1280,xxl:1536,"2xl":1536},presets:{},provider:"ipx",domains:[],alias:{},densities:[1,2],format:["webp"],providers:{ipx:{provider:Ie,defaults:{}}}},U=t=>{const e=K(),s=P();return s.$img||s._img||(s._img=we({...Me,event:s.ssrContext?.event,nuxt:{baseURL:e.app.baseURL},runtimeConfig:e}))},D={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:t=>["lazy","eager"].includes(t)},crossorigin:{type:[Boolean,String],required:!1,validator:t=>["anonymous","use-credentials","",!0,!1].includes(t)},decoding:{type:String,required:!1,validator:t=>["async","auto","sync"].includes(t)},nonce:{type:[String],required:!1}},Ne=t=>{const e=p(()=>({provider:t.provider,preset:t.preset})),s=p(()=>({width:S(t.width),height:S(t.height),alt:t.alt,referrerpolicy:t.referrerpolicy,usemap:t.usemap,longdesc:t.longdesc,ismap:t.ismap,crossorigin:t.crossorigin===!0?"anonymous":t.crossorigin||void 0,loading:t.loading,decoding:t.decoding,nonce:t.nonce})),r=U(),i=p(()=>({...t.modifiers,width:S(t.width),height:S(t.height),format:t.format,quality:t.quality||r.options.quality,background:t.background,fit:t.fit}));return{options:e,attrs:s,modifiers:i}},Ce={...D,legacyFormat:{type:String,default:null},imgAttrs:{type:Object,default:null}},Re=["type","sizes","srcset"],We=["src","sizes","srcset"],ke=B({__name:"NuxtPicture",props:Ce,emits:["load","error"],setup(t,{emit:e}){const s=t,r=ee(),i=e,o=!1,a=U(),{attrs:c,options:u,modifiers:d}=Ne(s),v=p(()=>fe(s.src)),n=p(()=>["png","webp","gif","svg"].includes(v.value)),f=p(()=>s.legacyFormat?s.legacyFormat:n.value?"png":"jpeg"),y=p(()=>{const m=s.format?.split(",")||(v.value==="svg"?["svg"]:a.options.format?.length?[...a.options.format]:["webp"]);return m[0]==="svg"?[{src:s.src}]:(m.includes(f.value)&&m.splice(m.indexOf(f.value),1),m.push(f.value),m.map(_=>{const{srcset:z,sizes:Q,src:J}=a.getSizes(s.src,{...u.value,sizes:s.sizes||a.options.screens,densities:s.densities,modifiers:{...d.value,format:_}});return{src:J,type:`image/${_}`,sizes:Q,srcset:z}}))}),l=p(()=>y.value[y.value.length-1]),g=p(()=>{const m={...s.imgAttrs,"data-nuxt-pic":""};for(const _ in r)_ in D&&!(_ in m)&&(m[_]=r[_]);return m}),h=te(),G=P().isHydrating;return se(()=>{h.value&&(h.value.complete&&G&&(h.value.getAttribute("data-error")?i("error",new Event("error")):i("load",new Event("load"))),h.value.onload=m=>{i("load",m)},h.value.onerror=m=>{i("error",m)},de("nuxt-picture"))}),(m,_)=>(w(),b("picture",null,[(w(!0),b(E,null,V(y.value.slice(0,-1),z=>(w(),b("source",{key:z.src,type:z.type,sizes:z.sizes,srcset:z.srcset},null,8,Re))),128)),l.value?(w(),b("img",L({key:0,ref_key:"imgEl",ref:h},{...x(c),...x(o)?{onerror:"this.setAttribute('data-error', 1)"}:{},...g.value},{src:l.value.src,sizes:l.value.sizes,srcset:l.value.srcset}),null,16,We)):F("",!0)]))}}),Oe=Object.assign(ke,{__name:"NuxtPicture"}),Pe=["src","loading","alt","title"],Be=["innerHTML"],Fe=B({__name:"C-Image",props:{tag:{default:"figure"},src:{},srcAlternates:{},lazy:{type:Boolean,default:!0},title:{},alt:{},fit:{default:"cover"},position:{default:"center center"},autosize:{type:Boolean,default:!1},borderRadius:{},description:{},aspectRatios:{},useNuxtPicture:{type:Boolean,default:!1},format:{default:"webp"},sizes:{},quality:{default:80},width:{},height:{},placeholder:{type:[String,Boolean]},imgAttrs:{},colorMode:{}},setup(t){const e=t,{componentName:s}=le(),r=p(()=>{const n={};if(e.autosize&&(n[q(void 0,"autosize")]=e.autosize),e.aspectRatios)for(const f in e.aspectRatios)n[q(void 0,`has-aspect-ratio-${f}`)]=!0;return $([s,ce().getClasses(e),n])}),i=p(()=>{const n={};if(e.fit&&(n["object-fit"]=e.fit),e.position&&(n["object-position"]=e.position),e.aspectRatios)for(const f in e.aspectRatios)n[`--aspect-ratio-${f}`]=e.aspectRatios[f];return n}),o=p(()=>{const n={[q("image")]:!0};return e.borderRadius&&(n[`border-radius-${e.borderRadius}`]=!0),n}),a=p(()=>{const n=[];if(e.srcAlternates)for(const f in e.srcAlternates){let y="0px";f!=="default"&&(y=ue(`breakpoint-${f}`));const l=e.srcAlternates[f];for(const g in l)n.push({srcset:c(l[g]),media:y!="0px"?`(min-width: ${y})`:void 0,type:`image/${g}`})}return n.reverse()});function c(n){let f="";for(const y in n)f+=`${n[y]} ${y}, `;return f.slice(0,-2)}const u=p(()=>e.lazy?"lazy":"eager"),d=p(()=>e.tag==="figure"?"figcaption":"span"),v=p(()=>{const n={alt:e.alt,title:e.title,class:o.value,style:i.value,role:"img",draggable:!1};return e.imgAttrs?{...n,...e.imgAttrs}:n});return(n,f)=>{const y=Oe,l=ae;return w(),M(re(n.tag),{class:$(r.value)},{default:N(()=>[n.useNuxtPicture?(w(),b("div",{key:0,class:$(x(q)("wrapper"))},[ie(y,{src:n.src,format:n.format,sizes:n.sizes,quality:n.quality,width:n.width,height:n.height,placeholder:n.placeholder,loading:u.value,"img-attrs":v.value},null,8,["src","format","sizes","quality","width","height","placeholder","loading","img-attrs"])],2)):(w(),b("picture",{key:1,class:$(x(q)("wrapper"))},[ne(n.$slots,"default",{},()=>[(w(!0),b(E,null,V(a.value,(g,h)=>(w(),b("source",L({ref_for:!0},g,{key:h}),null,16))),128)),C("img",{src:n.src,loading:u.value,class:$(o.value),style:oe(i.value),alt:n.alt,title:n.title,role:"img",draggable:"false"},null,14,Pe)])],2)),n.description?(w(),M(l,{key:2,tag:d.value,class:$(x(q)("caption"))},{default:N(()=>[C("p",{innerHTML:n.description},null,8,Be)]),_:1},8,["tag","class"])):F("",!0)]),_:3},8,["class"])}}}),Ge=Object.assign(Fe,{__name:"CImage"});export{Ge as default};
